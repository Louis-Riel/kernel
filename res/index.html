<!doctype html>

<head>
    <link rel="icon" type="image/png" href="/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="/app.css" />
    <script type="text/javascript" src="/app.js"></script>
</head>

<body>
    <div class="slider">
        <a onclick="renderFolder(document.getElementsByClassName('file-table')[0].getElementsByTagName('caption')[0].innerText)" href="#slide-1">SDCard</a>
        <a onclick="refreshStatus()" href="#slide-2">Status</a>
        <a onclick="refreshConfig()" href="#slide-3">Config</a>
        <div class="slides">
            <div id="slide-1" class="file_section">
                <div class="file-table">
                    <table class="greyGridTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Size</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td>Total</td>
                                <td></td>
                            </tr>
                        </tfoot>
                        <caption>%s</caption>
                    </table>
                </div>
            </div>
            <div id="slide-2" class="system-config">
                <form action="/rest/status/system" method="post">
                    <fieldset class="status">
                        <legend>System</legend>
                        <label>
                            Up Time
                            <input type="timespan" name="uptime" >
                        </label>
                        <label>
                            Sleep Time
                            <input type="timespan" name="sleeptime" >
                        </label>
                        <label>
                            Free RAM
                            <input type="number" name="freeram" >
                        </label>
                        <label>
                            RAM Usage
                            <input type="number" name="ramusage" >
                        </label>
                    </fieldset>
                    <fieldset id="wificonfig" class="status">
                        <legend>Wifi</legend>
                        <label>
                            Type
                            <select name="wifitype">
                                <option value="AP">Access Point</option>
                                <option value="Station">Station</option>
                            </select>
                        </label>
                        <label>
                            IP
                            <input name="ip" >
                        </label>
                    </fieldset>
                </form>
            </div>
            <div id="slide-3" class="system-config">
                <form action="/rest/status/system" method="put">
                    <fieldset class="sdcard">
                        <legend>SD Card</legend>
                        <label>
                            MISO Pin
                            <input type="number" name="MisoPin">
                        </label>
                        <label>
                            MOSI Pin
                            <input type="number" name="MosiPin">
                        </label>
                        <label>
                            Clock Pin
                            <input type="number" name="ClkPin">
                        </label>
                        <label>
                            CS Pin
                            <input type="number" name="CsPin">
                        </label>
                    </fieldset>
                    <fieldset class="gps">
                        <legend>GPS</legend>
                        <label>
                            RX Pin
                            <input type="number" name="rxPin">
                        </label>
                        <label>
                            TX Pin
                            <input type="number" name="txPin">
                        </label>
                        <label>
                            Enable Pin
                            <input type="number" name="enPin">
                        </label>
                        <fieldset class="syncpoints">
                            <legend>Sync Points</legend>
                        </fieldset>
                    </fieldset>
                    <button>Save</button>
                </form>
            </div>
            <script>
                renderFolder("/");
                refreshConfig();
                refreshStatus();
                document.querySelectorAll('th').forEach(th => th.addEventListener('click', (() => {
                    const table = document.getElementsByClassName("file-table")[0].getElementsByTagName("tbody")[0];
                    Array.from(table.querySelectorAll('tr:nth-child(n+2)'))
                        .sort(comparer(Array.from(th.parentNode.children).indexOf(th), this.asc = !this.asc))
                        .forEach(tr => table.appendChild(tr));
                })));
            </script>
        </div>
    </div>
</body>